anamul
======

MG fit, FFT fit, Detector response fit for SiPM spes and DCR

Programs and usage
==================
. is anamul folder<br>

<b>./bin/getfit &lt;DIR> &lt;n-files></b> <br>
    &lt;DIR> is the folder contains <em>spes-[i].root</em> and <em>spes-[i]-dcr.root</em> files <br>
    [i] in the range of  [0,&lt;n-files>], files not exist will be ignored. <br>
    The program do multi-gaussian and FFT fit on <em>spes-[i].root</em> files, get DCR and XT from <em>spes-[i]-dcr.root</em> files. <br>
    Make sure the <b>same voltage</b> applied to <em>spes-[i].root</em> and <em>spes-[i]-dcr.root</em> file, otherwise DCR is not correctly calculated. <br>
    All output parameters are in <em>&lt;DIR>/spes.log</em><br>

<b>./bin/getfitsingle &lt;path/filename> [ped] [gain] [npks]</b> <br>
    Run the same fit on single root file and leave the session in ROOT afterwards. <br>
    An entry is printed in the end, can be used to substitute the entry in <em>&lt;DIR>/spes.log</em> directly. <br>
    <em>[ped] [gain]</em> (must be given together) will be used instead of finding peaks. <br>
    <em>[npks]</em> tells the program how many peaks <b>after 0pe</b> are expected in the spes histogram. All in qdc channel number.<br>

<b>./bin/getdcr &lt;DIR> &lt;n-file> &lt;fitpar0> &lt;fitpar1> &lt;effgate> </b><br>
    Get DCR from <em>spes-[i]-dcr.root</em> files in <em>&lt;DIR></em>, use this in case the dcr are measured seperately.<br>
    The program determine 0.5thr from the linear dependance of gain on Vbias.<br>
    <em>&lt;fitpar0> &lt;fitpar1></em> are fit parameters in <em>Gain = &lt;fitpar0>+Vbias*&lt;fitpar1></em>, all in qdcch unit. Mind that Vbias may be negtive.<br>
    <em>&lt;effgate></em> is the effective QDC gate in DCR measurement.<br>

<b>./pythonfit/SiPMSpesFit.py &lt;DIR></b><br>
    <em>&lt;spes.log></em> generated by <b>getfit</b> must exist in <em>&lt;DIR></em><br>
    The program will then apply detector response fit on the root files. <br>
    Output parameters are written in <em>&lt;DIR>/pyspes.log</em>, fitted histograms are printed in <em>&lt;DIR>/out.pdf</em> <br>

<b>./pythonfit/SiPMPlot.py &lt;DIR></b><br>
    plot the results. results are taken from <em>pyspes.log</em> or <em>spes.log</em><br>